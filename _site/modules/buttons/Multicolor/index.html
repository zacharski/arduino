<!doctype html>
<!--[if lt IE 7 ]><html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]><html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]><html lang="en" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]><html lang="en" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!-->
<html lang="en" class="no-js"> <!--<![endif]-->
<head>
	<script type="text/javascript">var _sf_startpt = (new Date()).getTime()</script>
	<meta charset="utf-8">
	<!--[if IE]><meta content='IE=8' http-equiv='X-UA-Compatible' /><![endif]-->

	<title>Introduction to Arduino Programming | Multicolor</title>
  <meta name="description" content="Arduino  Programming Fundamentals">
  <meta name="author" content="">

  <meta property="og:title" content="Introduction to Arduino Programming" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="" />

	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<link rel="shortcut icon" href="/arduino/img/favicon.ico">
	<link rel="apple-touch-icon" href="/arduino/img/apple-touch-icon.png">

	<link rel="stylesheet" href="/arduino/css/p2pustrap-custom.css" />
	<link rel="stylesheet" href="/arduino/css/site.css" />
  

	<link rel="shortcut icon" href="/arduino/img/favicon.ico">
	<script type="text/javascript" src="/arduino/js/modernizr-2.6.2.min.js"></script>
</head>
<body 
      class="">

<!-- Navigation -->
<nav class="navbar navbar-default" role="navigation">

	<!-- Brand and toggle get grouped for better mobile display -->
	<div class="navbar-header">
		<a href="#" class="navbar-toggle" data-toggle="collapse" data-target="#p2pu-menu">
			<i class="fa fa-bars"></i>
		</a>
	</div>

	<!-- Collect the nav links, forms, and other content for toggling -->
	<div class="container">
		<div class="collapse navbar-collapse" id="p2pu-menu">
			<ul class="nav navbar-nav">
				<li>
					<a href="/arduino/"><i class="fa fa-home"></i></a>
				</li>
				
					
					<li class="dropdown  first ">
						<a href="/arduino/modules/basics/Intro-To-Basic-ML/"
						   class="dropdown-item">
							basics
						</a>
					</li>
				
					
					<li class="dropdown active  ">
						<a href="/arduino/modules/buttons/Intro-to-Boosting/"
						   class="dropdown-item">
							buttons
						</a>
					</li>
				
					
					<li class="dropdown   ">
						<a href="/arduino/modules/deep%20learning/Deep-Learning-Intro/"
						   class="dropdown-item">
							deep learning
						</a>
					</li>
				
					
					<li class="dropdown   last">
						<a href="/arduino/modules/bias/Bias/"
						   class="dropdown-item">
							bias
						</a>
					</li>
				
				
		</div>
		<!-- /.navbar-collapse -->
	</div>
	<!-- /.container-fluid -->
</nav>
<!-- End Navigation -->



<div class="clearfix">
	<div class="sidebar col-md-3">
	







	
		<div class="pagination-section">
			<div class="title">
				Previous module:
			</div>
			<a rel="prev" class="prev" href="/arduino/modules/basics/Intro-To-Basic-ML/">
				basics </a>
		</div>
		<hr />
	
	<ul>
		
			<li class=" first ">
				<a
						href="/arduino/modules/buttons/Intro-to-Boosting/">
					Intro To Boosting
				</a>
			</li>
		
			<li class="active  ">
				<a
						href="/arduino/modules/buttons/Multicolor/">
					Multicolor
				</a>
			</li>
		
			<li class="  ">
				<a
						href="/arduino/modules/buttons/Bagging-Classifiers/">
					Bagging Classifiers
				</a>
			</li>
		
			<li class="  last">
				<a
						href="/arduino/modules/buttons/XGBoost/">
					Xgboost
				</a>
			</li>
		
	</ul>
	
		<hr />
		<div class="pagination-section">
			<div class="title">
				Next module:
			</div>
			<a rel="next" class="next" href="/arduino/modules/deep%20learning/Deep-Learning-Intro/"> deep learning
			</a>
		</div>
	
</div>
	<div class="col-md-9 background-white">
		<div class="col-md-8 col-md-offset-1">
			<div class="row">
				<div class="content col-lg-12">
					<h2 id="experiment-4">Experiment 4:</h2>

<h1 id="the-magical-multicolor-led1">The Magical Multicolor LED<sup><a href="#myfootnote1">1</a></sup></h1>

<h2 id="part-1-i-have-in-my-hand-a-plain-ordinary-led">Part 1: I have in my hand a plain, ordinary LED</h2>

<h2 id="introduction">Introduction</h2>

<p>Let’s return to the first circuit we built which controlled a single LED light. Go ahead and create that initial circult.</p>

<h3 id="discussion">Discussion</h3>

<p>So far we learned how to turn the LED on; how to turn it off; how to blink the LED; and how to blink it in various patterns. In this experiment we are going to learn how to have different levels of brightness. Earlier in the class I said those digital pins can only be on or off and now I am saying the opposite. How can this be?</p>

<p>Here is the non-technical explanation. Suppose you are in a room and your little brother quickly turns the lights on and off. Faster and faster. At some point, if your brother is particularly quick, this stops being extremely annoying and instead we stop perceiving the on and off and instead sense a steady dim light. The ons and offs are there but we don’t perceive them. If the offs are a bit longer than the ons the light is dimmer and if the ons are a bit longer than the offs then the light will be brighter. This is called Pulse Width Modulation or PWM.</p>

<p><img src="/arduino/img/pwm1.png" alt="" /></p>

<p>It let’s use our digital <em>on</em> and <em>off</em> to make something that looks on the surface as non-digital. <strong>This is pretty cool!</strong></p>

<p>Fortunately, we don’t need to write code that quickly turns the LED on and off. We tell our ESP8266 microprocessor how bright the LED should be, and it takes care of the details. Here is the scoop. Instead of using:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>digitalWrite(led, HIGH);
</code></pre></div></div>

<p>we are going to use</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>analogWrite(led, 1023);
</code></pre></div></div>

<p>The number 1023 represents how bright we want the LED. 0 means the LED is off, 1023 means the LED is at its brightest, 512 means mid brightness — you get the idea.</p>

<p><img src="/arduino/img/pwm2.gif" alt="" /></p>

<blockquote>
  <p>You may be wondering why 1023? Wouldn’t it better to use some normal number like 1000? Here is the scoop. Computers operate on the binary number system. I will not go into too much detail, but powers of 2 are more natural: 2, 4, 8, 16, 32 … Now the range 0 to 1023 represents 1024 distinct values and 1024 is a power of two– 2^10 IS 1024. That is probably more than you want to know.</p>
</blockquote>

<h2 id="a-sample-program-to-have-a-mid-brightness-led-light-">A sample program to have a mid-brightness LED light. (</h2>

<p>Open up the Arduino IDE (the program you just installed in the step above). Then, under the file menu select <strong>New</strong> and type in the following program</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>int led = 2;

void setup() {
  pinMode(led, OUTPUT);
}

void loop() {
  analogWrite(led, 512);
}
</code></pre></div></div>

<h2 id="multi-led-bonuses-for-the-remixes-below">Multi-LED bonuses for the remixes below</h2>

<ol>
  <li>for each of the remixes below you will get 25% xp more if you use 3 LEDs. For example, if you demo remix 1 with 3 leds you will get 25xp. The good news is that if you wire those three LEDs once, you do not have to do any rewiring of those LEDs for the other remix.</li>
  <li>You will get 25% more if you use variables. These includes using variable names that make sense to people.</li>
</ol>

<h2 id="remix-1-loopy-lights-20xp">Remix 1 Loopy-Lights™ 20xp</h2>

<p>Can you write code that cycles the LED(s) from off, low brightness, medium brightness, high brightness).
So constantly off - low - mid - high - off - low - mid - high …</p>

<h2 id="remix-2-potentiometer-brightness-20xp">Remix 2 Potentiometer-brightness 20xp</h2>

<p>Can you write code so that a potentiometer controls the brightness of the LEDs?
This code is pretty short. You will have 1 or 2 lines inside the setup function and <strong>2 to 3 lines of code inside the loop function</strong>. When the potentiometer if all the way to the left, the led is off, as you turn the potentiometer gradually to the right the led gets gradually brighter.</p>

<h2 id="remix-4-a-for-loopy-pulsey-light-thing-20xp">Remix 4 a for loopy pulsey light thing 20xp</h2>

<p>Can you write code so that the lights start dark, gradually increase in brightness and then gradually dim and then repeat?</p>

<p>Here is a puzzler that may help you with one of the above problems. What does the following code do?</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>int led = D2;
int total = 100;
int add =  100;

void setup() {
   pinMode(D2, OUTPUT);
}

void loop() {
    digitalWrite(led, HIGH);
    delay(total);
    digitalWrite(led, LOW);
    delay(total);
    total = total + add;
    if ((total == 1000) || (total == 100)){
        add = -add;
    }
}
</code></pre></div></div>

<p>If you understand this code, it should provide a clue how to. do the loopy pulsey thing.</p>

<h1 id="part-2-the-magical-mysterious-world-of-the-multicolor-led">Part 2 The Magical Mysterious World of the Multicolor LED</h1>

<p><img src="pics/rgb.jpg" alt="" />
In this part of the lab we are going to be working with what is called an RGB LED (RGB stands for Red, Green, Blue). There are 4 wires sticking out of this LED. The one we have in our kit is called a Common-Anode type, which simply means that we connect the long leg to 3V. (The other type is the Common-Cathode type where we connect the long leg to ground) Here is a picture that may help:</p>

<p><img src="pics/common_anode_rgb_led.png" alt="" /></p>

<h3 id="lets-pause-and-look-at-that-picture">Let’s pause and look at that picture</h3>

<ul>
  <li>We are going to connect. the + pin to 3v on our exp8266</li>
  <li>The R (red) pin we will connected through a resistor to an i/o pin on the esp8266 (pin 5 for example)</li>
  <li>The G (green) pin will be similarly connected</li>
  <li>The B (blue) pin will also be connected in that way.</li>
  <li>And to make things easier we will define a variable to the pins that each are connected to (<code class="highlighter-rouge">int red = 5</code> for example)</li>
</ul>

<h3 id="some-slight-challenges-with-a-common-anode-led">Some slight challenges with a common-anode LED.</h3>

<p>Having a common-anode RGB LED makes life a tad more <del>difficult</del> interesting. In the above example if we wanted the <code class="highlighter-rouge">led</code> off we would write:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>analogWrite(led, 0);
</code></pre></div></div>

<p>and if we wanted full brightness we had</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>analogWrite(led, 1023);
</code></pre></div></div>

<h3 id="heres-what-i-dont-like-about-common-anode-leds">Here’s what I don’t like about common-anode LEDs.</h3>

<p>With a common-anode LED things are topsy-turvy. To have a <code class="highlighter-rouge">green</code> led off we would have</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>analogWrite(green, 1023);
</code></pre></div></div>

<p>and if we wanted full brightness we would have</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>analogWrite(green, 0);
</code></pre></div></div>

<p>We could also use digitalWrite. In this case</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>digitalWrite(green, HIGH)
</code></pre></div></div>

<p>would be off and</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>digitalWrite(green, LOW);
</code></pre></div></div>

<p>would be on.</p>

<h2 id="fiddling-with-colors">Fiddling with colors</h2>

<p>In this single LED we can fiddle with the brightness of <strong>R</strong>ed, <strong>G</strong>reen, and <strong>B</strong>lue. For any color we would specify values for each of these. For example, if we wanted solid blue we might have:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>analogWrite(red, 1023);
analogWrite(green, 1023);
analogWrite(blue, 0);
</code></pre></div></div>

<p>Magenta (aka Fushia) is an equal mix of red and blue so if we wanted a bright magenta we might have:
<img src="pics/magenta.png" alt="" /></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>analogWrite(red, 0);
analogWrite(green, 1023);
analogWrite(blue, 0);
</code></pre></div></div>

<p>If you wanted a dimmer magenta you could do:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>analogWrite(red, 300);
analogWrite(green, 1023);
analogWrite(blue, 300);
</code></pre></div></div>

<p>Pink is mostly red with some green and blue:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>analogWrite(red, 1023);
analogWrite(green, 800);
analogWrite(blue, 800);
</code></pre></div></div>

<p><strong>Let’s get to work!</strong></p>

<h2 id="hardware-hookup">Hardware hookup</h2>

<p><img src="pics/es4b.png" alt="" /></p>

<p><a href="pics/es4b.png">link to larger picture</a></p>

<h2 id="the-code">The code</h2>

<p>And here is code that will display 8 colors just using digitalWrite:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>int RED_PIN = 4;
int GREEN_PIN = 5;
int BLUE_PIN = 2;


int DISPLAY_TIME = 100;  // In milliseconds


void setup()
{
  pinMode(RED_PIN, OUTPUT);
  pinMode(GREEN_PIN, OUTPUT);
  pinMode(BLUE_PIN, OUTPUT);
}


void loop()
{

  mainColors();
}


// Here's the mainColors() function we've written.

// This function displays the eight "main" colors that the RGB LED
// can produce.

void mainColors()
{
  // Off (all LEDs off):

  digitalWrite(RED_PIN, HIGH);
  digitalWrite(GREEN_PIN, HIGH);
  digitalWrite(BLUE_PIN, HIGH);

  delay(1000);

  // Red (turn just the red LED on):

  digitalWrite(RED_PIN, LOW);
  digitalWrite(GREEN_PIN, HIGH);
  digitalWrite(BLUE_PIN, HIGH);

  delay(1000);

  // Green (turn just the green LED on):

  digitalWrite(RED_PIN, HIGH);
  digitalWrite(GREEN_PIN, LOW);
  digitalWrite(BLUE_PIN, HIGH);

  delay(1000);

  // Blue (turn just the blue LED on):

  digitalWrite(RED_PIN, HIGH);
  digitalWrite(GREEN_PIN, HIGH);
  digitalWrite(BLUE_PIN, LOW);

  delay(1000);

  // Yellow (turn red and green on):

  digitalWrite(RED_PIN, LOW);
  digitalWrite(GREEN_PIN, LOW);
  digitalWrite(BLUE_PIN, HIGH);

  delay(1000);

  // Cyan (turn green and blue on):

  digitalWrite(RED_PIN, HIGH);
  digitalWrite(GREEN_PIN, LOW);
  digitalWrite(BLUE_PIN, LOW);

  delay(1000);

  // Purple (turn red and blue on):

  digitalWrite(RED_PIN, LOW);
  digitalWrite(GREEN_PIN, HIGH);
  digitalWrite(BLUE_PIN, LOW);

  delay(1000);

  // White (turn all the LEDs on):

  digitalWrite(RED_PIN, LOW);
  digitalWrite(GREEN_PIN, LOW);
  digitalWrite(BLUE_PIN, LOW);

  delay(1000);
}
</code></pre></div></div>

<h3 id="dimmer-red">Dimmer Red</h3>

<p>Here is some code that pulses the red part of the multicolor LED (and introduces the <code class="highlighter-rouge">for</code> loop):</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	int redLed = 4;
	int greenLed =5;
	int blueLed = 2;
	int display_time = 2; //in milliseconds
	int redColor = 0;
	int blueColor = 0;
	int greenColor = 0;

	void setup() {
	  pinMode(redLed, OUTPUT);
	  pinMode(greenLed, OUTPUT);
	  pinMode(blueLed, OUTPUT);

	}

	void dimmerRed(){
	  // first turn off the green and blue LEDs
	  analogWrite(greenLed, 1023);
	  analogWrite(blueLed, 1023);

	  // set the base value of the red led
	  // it should be at its brightest - so 0
	  redColor = 0;

	  // now make red dimmer and dimmer
	  for (int i = 0; i &lt; 1024; i += 1){
	    analogWrite(redLed, redColor + i);
	    delay(display_time);
	  }
	}

	void loop(){
	  dimmerRed();
	}
</code></pre></div></div>

<p>As you can see, the red light starts at its brightness (value 0) and quickly dims (goes to 1023).</p>

<p>Let’s look at the code for the function <code class="highlighter-rouge">dimmerRed</code>.</p>

<ul>
  <li>The first things we do is turn off green and blue by using <code class="highlighter-rouge">analogWrite(greenLed, 1023)</code> and <code class="highlighter-rouge">analogWrite(blueLed, 1023)</code></li>
  <li>Since we want the red part of the led to start at its brightest, we set the variable <code class="highlighter-rouge">redColor</code> initially to zero.</li>
  <li>Now we start our <code class="highlighter-rouge">for</code> loop. The first time through the loop <code class="highlighter-rouge">i</code> is 0, the next time it is 1, then 2 until <code class="highlighter-rouge">i</code> equals 1024 and then the loop stops.</li>
  <li>Next we have <code class="highlighter-rouge">analogWrite(redLed, redColor + i);</code> Initially redColor is 0 and i is 0 so we set the redLed to brightness 0. The next time through the loop i is 1 so we set the brightness to 1 and so on.</li>
</ul>

<h2 id="red-and-blue-passing-in-the-night">Red and Blue Passing in the Night</h2>

<h4 id="part-1-redtoblue--10xp">part 1 redToBlue- 10xp</h4>

<p>Can you write a function <code class="highlighter-rouge">redToBlue</code> so that as the red dims the blue increases in brightness? The format of the function is similar to that for <code class="highlighter-rouge">dimmerRed</code>. Once you’ve written that function change the loop function to:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	void loop(){
	  redToBlue();
	}
</code></pre></div></div>

<p>to test it.</p>

<h3 id="part-2-red-and-blue-passing-in-the-night---20xp">part 2: red and blue passing in the night - 20xp</h3>

<p>Ok. Part 1 had you move from red to blue and then there was a sudden jump back to red. Can you modify the code so that the light gradually goes from red to blue and then gradually back again? This may involve writing another function.</p>

<h3 id="part-3-roy-g-biv---10-20xp">Part 3: Roy G Biv - 10-20xp</h3>

<p>Now we want the multicolor led to go gradually from red to green then green to blue and then blue to red? Think about how you would break this problem down into simple functions. 10xp for a solution that works, 20xp for code that breaks this task down into simpler subtasks.</p>

<h3 id="part-4-roy-g-biv-r-vib-g-yor---15xp">Part 4: Roy G Biv R Vib G Yor - 15xp</h3>

<p>This is a puzzle. What do Mikaela and I want to see?</p>

<h1 id="controlling-color-from-your-phone---15xp">Controlling Color from Your Phone - 15xp</h1>

<p>Follow the <a href="https://learn.adafruit.com/adafruit-io-basics-color/overview">Adafruit Tutorial</a>.</p>

<p><a name="myfootnote1">1</a>: Tutorials are <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a>. Original page at <a href="https://learn.sparkfun.com/tutorials/sparkfun-inventors-kit-for-photon-experiment-guide/experiment-1-hello-world-blink-an-led">Sparkfun Inventor’s Kit for Photon</a>. This slight remix by Ron Zacharski
a</p>

					





					
						<hr />
					
					
						<div class="pagination-section pull-left">
							<div class="title">
								Previous section:
							</div>
							<a rel="prev" class="prev" href="/arduino/modules/buttons/Intro-to-Boosting/">
								Intro To Boosting </a>
						</div>
					
					
						<div class="pagination-section pull-right">
							<div class="title">
								Next section:
							</div>
							<a rel="next" class="next" href="/arduino/modules/buttons/Bagging-Classifiers/"> Bagging Classifiers
							</a>
						</div>
					
				</div>
			</div>
		</div>
	</div>
</div>


<footer class="p2pu-footer">
  <div class="container">
    <div class="row">
      <div class="col-sm-3 col-sm-offset-3">
        <a href="https://inquiryum.com/" class="image-link"
          ><img
            id="cmp-logo"
            src="/arduino/img/inquiryum-logo.png"
            class="img-responsive"
        /></a>
      </div>

      <div class="col-sm-3">
        <a href="https://www.imls.gov" class="image-link"
          ><img src="/arduino/img/footer2.png" class="img-responsive"
        /></a>
      </div>
    </div>

    <div class="row">
      <div class="col-sm-6 col-sm-offset-3" id="p2pu-content">
        <p>
          Built using <a href="http://howto.p2pu.org">Course in a Box</a>, a
          project of
        </p>
        <a href="https://www.p2pu.org" class="image-link"
          ><img
            src="/arduino/img/p2pu-logo-2x-white.png"
            alt="P2PU logo"
        /></a>
      </div>
    </div>

    <div class="row">
      <div class="col-sm-10 col-sm-offset-1 cc-by-sa">
        <img
          src="/arduino/img/cc-icons.png"
          alt="CC-BY-SA Icon"
          class="img-responsive"
        />
        <p>
          Unless otherwise noted, all the materials on this site are licensed
          under a
          <a
            target="_blank"
            href="http://creativecommons.org/licenses/by-sa/4.0/"
          >
            Creative Commons Attribution Share Alike 4.0</a
          >
          Unported license.
        </p>
      </div>
    </div>
  </div>
</footer>


<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script>
  window.jQuery || document.write('<script src="/arduino/js/jquery.min.js"><\/script>')
</script>

<script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
<script type="text/javascript"
        src="//s3.amazonaws.com/p2pu-navigation-widget/p2pu_menu_slider.js"></script>
<script src="/arduino/js/init.js"></script>
<script src="/arduino/js/gh_link_helper.js"></script>



<script>
	P2PU.ciab.init();
</script>



<!-- Google Analytics -->

	<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  
    ga('create', 'UA-5757664-19', 'auto');
  
  
    ga('create', 'UA-55722824-1', 'auto', {'name': 'p2puTracker'} );
  
  
    ga('send', 'pageview');
  
  
    ga('p2puTracker.send', 'pageview');
  
</script>



</body>
</html>
