<!doctype html>
<!--[if lt IE 7 ]><html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]><html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]><html lang="en" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]><html lang="en" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!-->
<html lang="en" class="no-js"> <!--<![endif]-->
<head>
	<script type="text/javascript">var _sf_startpt = (new Date()).getTime()</script>
	<meta charset="utf-8">
	<!--[if IE]><meta content='IE=8' http-equiv='X-UA-Compatible' /><![endif]-->

	<title>Introduction to Arduino Programming | Music</title>
  <meta name="description" content="Arduino  Programming Fundamentals">
  <meta name="author" content="">

  <meta property="og:title" content="Introduction to Arduino Programming" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="" />

	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<link rel="shortcut icon" href="/arduino/img/favicon.ico">
	<link rel="apple-touch-icon" href="/arduino/img/apple-touch-icon.png">

	<link rel="stylesheet" href="/arduino/css/p2pustrap-custom.css" />
	<link rel="stylesheet" href="/arduino/css/site.css" />
  

	<link rel="shortcut icon" href="/arduino/img/favicon.ico">
	<script type="text/javascript" src="/arduino/js/modernizr-2.6.2.min.js"></script>
</head>
<body 
      class="">

<!-- Navigation -->
<nav class="navbar navbar-default" role="navigation">

	<!-- Brand and toggle get grouped for better mobile display -->
	<div class="navbar-header">
		<a href="#" class="navbar-toggle" data-toggle="collapse" data-target="#p2pu-menu">
			<i class="fa fa-bars"></i>
		</a>
	</div>

	<!-- Collect the nav links, forms, and other content for toggling -->
	<div class="container">
		<div class="collapse navbar-collapse" id="p2pu-menu">
			<ul class="nav navbar-nav">
				<li>
					<a href="/arduino/"><i class="fa fa-home"></i></a>
				</li>
				
					
					<li class="dropdown  first ">
						<a href="/arduino/modules/module%20one/Introduction/"
						   class="dropdown-item">
							Module One
						</a>
					</li>
				
					
					<li class="dropdown   ">
						<a href="/arduino/modules/two/Introduction/"
						   class="dropdown-item">
							Two
						</a>
					</li>
				
					
					<li class="dropdown active  ">
						<a href="/arduino/modules/three/Introduction/"
						   class="dropdown-item">
							Three
						</a>
					</li>
				
					
					<li class="dropdown   ">
						<a href="/arduino/modules/four/NeoPixel/"
						   class="dropdown-item">
							Four
						</a>
					</li>
				
					
					<li class="dropdown   last">
						<a href="/arduino/modules/resources/community/"
						   class="dropdown-item">
							resources
						</a>
					</li>
				
				
		</div>
		<!-- /.navbar-collapse -->
	</div>
	<!-- /.container-fluid -->
</nav>
<!-- End Navigation -->



<div class="clearfix">
	<div class="sidebar col-md-3">
	







	
		<div class="pagination-section">
			<div class="title">
				Previous module:
			</div>
			<a rel="prev" class="prev" href="/arduino/modules/two/Introduction/">
				Two </a>
		</div>
		<hr />
	
	<ul>
		
			<li class=" first ">
				<a
						href="/arduino/modules/three/Introduction/">
					Introduction
				</a>
			</li>
		
			<li class="  ">
				<a
						href="/arduino/modules/three/Magic/">
					Magic
				</a>
			</li>
		
			<li class="  ">
				<a
						href="/arduino/modules/three/Arrays/">
					Arrays
				</a>
			</li>
		
			<li class="active  ">
				<a
						href="/arduino/modules/three/Music/">
					Music
				</a>
			</li>
		
			<li class="  last">
				<a
						href="/arduino/modules/three/Chocolate/">
					Chocolate
				</a>
			</li>
		
	</ul>
	
		<hr />
		<div class="pagination-section">
			<div class="title">
				Next module:
			</div>
			<a rel="next" class="next" href="/arduino/modules/four/NeoPixel/"> Four
			</a>
		</div>
	
</div>
	<div class="col-md-9 background-white">
		<div class="col-md-8 col-md-offset-1">
			<div class="row">
				<div class="content col-lg-12">
					<h2 id="experiment-9">Experiment 9:</h2>

<h1 id="finally-some-music">Finally some Music</h1>

<p>In this experiment we are going to learn how to make a speaker or buzzer click. Now a click may not sound like much :-) but when we put clicks together we can make more interesting sounds. For example, if we have 440 clicks in a second we have the note ‘A’. If we have 3 short periods of it clicking at 392 clicks per second followed by a period of it clicking at 261 clicks per second we have the opening four notes of Beethoven’s Fifth Symphony (albeit in a musical greeting card quality). Let’s get clicking.</p>

<p><img src="/arduino/img/speakbuzz.png" alt="" /></p>

<h4 id="parts-needed">Parts Needed</h4>

<p>You will need:</p>

<ul>
  <li>1x buzzer or speaker</li>
  <li>a Few Jumper Wires</li>
</ul>

<h2 id="hardware-hookup">Hardware Hookup</h2>

<p><img src="/arduino/img/music_bb.png" alt="" /></p>

<p><a href="/arduino/img/music_bb.png">Link to larger image</a></p>

<h2 id="the-basic-code">The basic code</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>int speaker = 3;

// We'll set up an array with the notes we want to play
// change these values to make different songs!

// Length must equal the total number of notes and spaces

   //
  //
 // SONG 1
//
void song1(){
   const int songLength = 17;
   String notes[] = {"C4", "D4", "F4", "D4", "A4", " ",  "A4", "G4", " ",
                     "C4", "D4", "F4", "D4", "G4", " ", "G4", "F4"};
   //a space represents a rest

   // Beats is an array of values for each note and rest.
   // A 1 represents the shortest note in the song. If it is an eighth note, then 1 = an eighth note,
   // if the shortest note is a 16th note, then 1 represents a 16th note
   // Don't forget that the rests (spaces) need a length as well.
   int beats[] = {1,1,1,1,1,1,4,4,2,1,1,1,1,1,1,4,4,2};

   // the notes and beats array are aligned meaning the first note C4 has a beat of 1.

   int tempo = 150;

   int i, duration;

   // step through the song array
   for (i = 0; i &lt; songLength; i++){
      duration = beats[i] * tempo;   // length of note/rest in ms
      if (notes[i] == " ") {         // is this a rest?
        delay(duration);             // then pause for a moment
      }
      else {                         // otherwise, play the note
        tone(speaker, frequency(notes[i]), duration);
        delay(duration);             // wait for tone to finish
      }
      delay(tempo/10);              // brief pause between notes
   }
}

   //
  //
 // SETUP
//
void setup() {
  pinMode(speaker, OUTPUT);
}

   //
  //
 // LOOP
//
void loop() {
    song1();
    delay(2000);
}

   //
  //
 // FREQUENCY
//
int frequency(String note) {
  // This function takes a note string (for example C4), and returns the
  // corresponding frequency in Hz for the tone() function.

  int i;
  int numNotes = 8;  // number of notes we're storing

  String names[] = { "C4", "D4", "E4", "F4", "G4", "A4", "B4", "C5" };
  int frequencies[] = {262, 294, 330, 349, 392, 440, 494, 523};

  for (i = 0; i &lt; numNotes; i++) {
    if (names[i] == note) {        // Is this the one?
      return(frequencies[i]);     // Yes! Return the frequency
    }
  }
  return(0);
}

</code></pre></div></div>

<p>When you upload the code you should hear a song that annoyingly repeats over, and over and over again.</p>

<h3 id="comments">Comments</h3>

<h4 id="the-frequency-procedure">The Frequency Procedure</h4>

<p>Note that the frequency procedure is similar to the <code class="highlighter-rouge">lookup</code> procedure in our array experiment. In the <code class="highlighter-rouge">lookup</code> procedure we gave the procedure a name, <em>Addie</em> as an example, and it returned the person’s age. In the <code class="highlighter-rouge">frequency</code> procedure, we give the procedure the name of a note, F4 as an example, and it returns that note’s frequency, 349 in this case.</p>

<p>Let’s say we want to write our own song and it requires a new note, say C#4. We look up its frequency on the <a href="http://pages.mtu.edu/~suits/notefreqs.html">frequencies for the equal temperament scale</a> and see that the frequency is 277.18. We round that to 277 and add the name of the note (C#4) to the names array and its frequency to the frequencies array …</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  String names[] = { "C4", "C#4", "D4", "E4", "F4", "G4", "A4", "B4", "C5" };
  int frequencies[] = {262, 277, 294, 330, 349, 392, 440, 494, 523};
</code></pre></div></div>

<h3 id="the-song1-procedure">The song1 procedure</h3>

<p>Within the song1 procedure a song is represented by the variables, <code class="highlighter-rouge">songLength</code>, <code class="highlighter-rouge">notes</code> and <code class="highlighter-rouge">beats</code>. <code class="highlighter-rouge">songLength</code> is simply the number of entries in the <code class="highlighter-rouge">notes</code> array. The <code class="highlighter-rouge">notes</code> array contains the names of the notes to play and the <code class="highlighter-rouge">beats</code> array represents how long to play each note. Let’s say we want to play a new song. Perhaps this one …</p>

<p><img src="/arduino/img/dua.png" alt="" /></p>

<p>We are only going to encode the top line of notes and for now let’s just look at the first measure:</p>

<p><img src="/arduino/img/dua2.png" alt="" /></p>

<p>The notes of that measure are</p>

<p>C4, B3, A3, B3, C4, B3, A3.</p>

<p>So the notes array will be</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>String notes[] = {"C4", "B3", "A3", "B3", "C4", "B3", "A3"}'
</code></pre></div></div>

<p>The shortest notes of the songs are eighth notes so those will get 1 beat. The first 6 notes of the song are eighth notes and the 7th note is a quarter note so the beats array will be</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>int beats[] = {1,1,1,1,1,1, 2};
</code></pre></div></div>

<h2 id="remix-1-the-song">Remix 1: The Song</h2>

<p>Can you write code to have the buzzer play a recognizable (and correct) tune that spans an octave and a half?</p>

<p>Don’t know music? This remix is a great opportunity to have a conversation with someone that does.</p>

					





					
						<hr />
					
					
						<div class="pagination-section pull-left">
							<div class="title">
								Previous section:
							</div>
							<a rel="prev" class="prev" href="/arduino/modules/three/Arrays/">
								Arrays </a>
						</div>
					
					
						<div class="pagination-section pull-right">
							<div class="title">
								Next section:
							</div>
							<a rel="next" class="next" href="/arduino/modules/three/Chocolate/"> Chocolate
							</a>
						</div>
					
				</div>
			</div>
		</div>
	</div>
</div>


<footer class="p2pu-footer">
  <div class="container">
    <div class="row">
      <div class="col-sm-3 col-sm-offset-3">
        <a href="https://inquiryum.com/" class="image-link"
          ><img
            id="cmp-logo"
            src="/arduino/img/inquiryum-logo.png"
            class="img-responsive"
        /></a>
      </div>

      <div class="col-sm-3">
        <a href="https://www.imls.gov" class="image-link"
          ><img src="/arduino/img/footer2.png" class="img-responsive"
        /></a>
      </div>
    </div>

    <div class="row">
      <div class="col-sm-6 col-sm-offset-3" id="p2pu-content">
        <p>
          Built using <a href="http://howto.p2pu.org">Course in a Box</a>, a
          project of
        </p>
        <a href="https://www.p2pu.org" class="image-link"
          ><img
            src="/arduino/img/p2pu-logo-2x-white.png"
            alt="P2PU logo"
        /></a>
      </div>
    </div>

    <div class="row">
      <div class="col-sm-10 col-sm-offset-1 cc-by-sa">
        <img
          src="/arduino/img/cc-icons.png"
          alt="CC-BY-SA Icon"
          class="img-responsive"
        />
        <p>
          Unless otherwise noted, all the materials on this site are licensed
          under a
          <a
            target="_blank"
            href="http://creativecommons.org/licenses/by-sa/4.0/"
          >
            Creative Commons Attribution Share Alike 4.0</a
          >
          Unported license.
        </p>
      </div>
    </div>
  </div>
</footer>


<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script>
  window.jQuery || document.write('<script src="/arduino/js/jquery.min.js"><\/script>')
</script>

<script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
<script type="text/javascript"
        src="//s3.amazonaws.com/p2pu-navigation-widget/p2pu_menu_slider.js"></script>
<script src="/arduino/js/init.js"></script>
<script src="/arduino/js/gh_link_helper.js"></script>



<script>
	P2PU.ciab.init();
</script>



<!-- Google Analytics -->

	<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  
    ga('create', 'UA-5757664-19', 'auto');
  
  
    ga('create', 'UA-55722824-1', 'auto', {'name': 'p2puTracker'} );
  
  
    ga('send', 'pageview');
  
  
    ga('p2puTracker.send', 'pageview');
  
</script>



</body>
</html>
