<!doctype html>
<!--[if lt IE 7 ]><html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]><html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]><html lang="en" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]><html lang="en" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!-->
<html lang="en" class="no-js"> <!--<![endif]-->
<head>
	<script type="text/javascript">var _sf_startpt = (new Date()).getTime()</script>
	<meta charset="utf-8">
	<!--[if IE]><meta content='IE=8' http-equiv='X-UA-Compatible' /><![endif]-->

	<title>Introduction to Arduino Programming | Multicolor</title>
  <meta name="description" content="Arduino  Programming Fundamentals">
  <meta name="author" content="">

  <meta property="og:title" content="Introduction to Arduino Programming" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="" />

	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<link rel="shortcut icon" href="/arduino/img/favicon.ico">
	<link rel="apple-touch-icon" href="/arduino/img/apple-touch-icon.png">

	<link rel="stylesheet" href="/arduino/css/p2pustrap-custom.css" />
	<link rel="stylesheet" href="/arduino/css/site.css" />
  

	<link rel="shortcut icon" href="/arduino/img/favicon.ico">
	<script type="text/javascript" src="/arduino/js/modernizr-2.6.2.min.js"></script>
</head>
<body 
      class="">

<!-- Navigation -->
<nav class="navbar navbar-default" role="navigation">

	<!-- Brand and toggle get grouped for better mobile display -->
	<div class="navbar-header">
		<a href="#" class="navbar-toggle" data-toggle="collapse" data-target="#p2pu-menu">
			<i class="fa fa-bars"></i>
		</a>
	</div>

	<!-- Collect the nav links, forms, and other content for toggling -->
	<div class="container">
		<div class="collapse navbar-collapse" id="p2pu-menu">
			<ul class="nav navbar-nav">
				<li>
					<a href="/arduino/"><i class="fa fa-home"></i></a>
				</li>
				
					
					<li class="dropdown  first ">
						<a href="/arduino/modules/module%20one/Introduction/"
						   class="dropdown-item">
							Module One
						</a>
					</li>
				
					
					<li class="dropdown active  ">
						<a href="/arduino/modules/two/Introduction/"
						   class="dropdown-item">
							Two
						</a>
					</li>
				
					
					<li class="dropdown   ">
						<a href="/arduino/modules/three/Introduction/"
						   class="dropdown-item">
							Three
						</a>
					</li>
				
					
					<li class="dropdown   ">
						<a href="/arduino/modules/four/NeoPixel/"
						   class="dropdown-item">
							Four
						</a>
					</li>
				
					
					<li class="dropdown   last">
						<a href="/arduino/modules/resources/Remixes/"
						   class="dropdown-item">
							resources
						</a>
					</li>
				
				
		</div>
		<!-- /.navbar-collapse -->
	</div>
	<!-- /.container-fluid -->
</nav>
<!-- End Navigation -->



<div class="clearfix">
	<div class="sidebar col-md-3">
	







	
		<div class="pagination-section">
			<div class="title">
				Previous module:
			</div>
			<a rel="prev" class="prev" href="/arduino/modules/module%20one/Introduction/">
				Module One </a>
		</div>
		<hr />
	
	<ul>
		
			<li class=" first ">
				<a
						href="/arduino/modules/two/Introduction/">
					Introduction
				</a>
			</li>
		
			<li class="  ">
				<a
						href="/arduino/modules/two/Procedures/">
					Procedures
				</a>
			</li>
		
			<li class="active  ">
				<a
						href="/arduino/modules/two/Multicolor/">
					Multicolor
				</a>
			</li>
		
			<li class="  last">
				<a
						href="/arduino/modules/two/Light-Sensor/">
					Light Sensor
				</a>
			</li>
		
	</ul>
	
		<hr />
		<div class="pagination-section">
			<div class="title">
				Next module:
			</div>
			<a rel="next" class="next" href="/arduino/modules/three/Introduction/"> Three
			</a>
		</div>
	
</div>
	<div class="col-md-9 background-white">
		<div class="col-md-8 col-md-offset-1">
			<div class="row">
				<div class="content col-lg-12">
					<h2 id="experiment-4">Experiment 4:</h2>

<h1 id="the-magical-multicolor-led1">The Magical Multicolor LED<sup><a href="#myfootnote1">1</a></sup></h1>

<h3 id="red-led-countdown-timers-are-scary">RED LED Countdown timers are scary</h3>

<h4 id="an-introduction-to-for-loops">An introduction to <em>for</em>-loops</h4>

<iframe width="560" height="315" src="https://www.youtube.com/embed/RUN0R7sBnuA" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>

<ul>
  <li>main content begins at around the 4 minute mark</li>
  <li>a challenge begins at 14:40</li>
</ul>

<h2 id="part-1-i-have-in-my-hand-a-plain-ordinary-led">Part 1: I have in my hand a plain, ordinary LED</h2>

<h2 id="introduction">Introduction</h2>

<p>Let’s return to the first circuit we built which controlled a single LED light. Go ahead and create that initial circult.</p>

<h3 id="discussion">Discussion</h3>

<p>So far we learned how to turn the LED on; how to turn it off; how to blink the LED; and how to blink it in various patterns. In this experiment we are going to learn how to have different levels of brightness. Earlier in the class I said those digital pins can only be on or off and now I am saying the opposite. How can this be?</p>

<p>Here is the non-technical explanation. Suppose you are in a room and your little brother quickly turns the lights on and off. Faster and faster. At some point, if your brother is particularly quick, this stops being extremely annoying and instead we stop perceiving the on and off and instead sense a steady dim light. The ons and offs are there but we don’t perceive them. If the offs are a bit longer than the ons the light is dimmer and if the ons are a bit longer than the offs then the light will be brighter. This is called Pulse Width Modulation or PWM.</p>

<p><img src="/arduino/img/pwm1.png" alt="" /></p>

<p>It uses our digital <em>on</em> and <em>off</em> to make something that looks on the surface as non-digital—a dimmable light. <strong>This is pretty cool!</strong></p>

<p>Fortunately, we don’t need to write code that quickly turns the LED on and off. We tell our microprocessor how bright the LED should be, and it takes care of the details.</p>

<p>Here is the scoop.</p>

<p>Instead of using:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>digitalWrite(led, HIGH);
</code></pre></div></div>

<p>we are going to use</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>analogWrite(led, 255);
</code></pre></div></div>

<p>The number 255 represents how bright we want the LED. 0 means the LED is off, 255 means the LED is at its brightest, 127 means mid brightness — you get the idea.</p>

<p><img src="/arduino/img/pwm2.gif" alt="" /></p>

<h3 id="the-squiggle-the-tilde-and-pulse-width-modulation-pwm">The squiggle, the tilde, and pulse width modulation (pwm)</h3>

<p>Again, pulse width modulation, means that given a command like</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>analogWrite(3, 127)
</code></pre></div></div>

<p>The Arduino Uno will turn pin 3 on and off superfast so the led connected to it will appear to be at half brightness. Only certain pins on the Uno can do pulse width modulation. The ones that can have a squiggle or tilde next to the number.</p>

<p><img src="/arduino/img/uno-pwm.png" alt="" /></p>

<p>As you can see, only pins 3, 5, 6, 9. 10, and 11 can do pwm. so</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>analogWrite(13, 127)
</code></pre></div></div>

<p>won’t work. Why? Because pin 13 cannot do pwm. For this experiment only connect the leds to the pwm pins.</p>

<h3 id="binary">Binary</h3>

<blockquote>
  <p>You may be wondering why 255? Wouldn’t it better to use some normal number like 100? Here is the reason. And here I am going to get a little geeky.</p>
</blockquote>

<h4 id="decimal-numbers-or-base-10">Decimal numbers or base-10</h4>

<p>We are all used to the decimal number system or base 10. In it, each column can have 10 values: 0, 1, 2, 3, 4, 5, 6, 7, 8, 9. In the base 10 system each column represents a power of 10. Starting at the rightmost column and moving leftward we have 10 to the power of zero which equals 1.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>                              10^0
                              1
</code></pre></div></div>

<p>The next column is 10 to the power of 1 which is 10</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>                    10^1       10^0
                    10         1
</code></pre></div></div>

<p>The next column is 10 to the power of 2 (10 squared) or 100, and so on.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>          10^4   10^3   10^2    10^1    10^0
          10000  1000   100     10      1
</code></pre></div></div>

<p>Consider a Tesla Model 3 costing $$37,990:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">10,000</th>
      <th style="text-align: center">1,000</th>
      <th style="text-align: center">100</th>
      <th style="text-align: center">10</th>
      <th style="text-align: center">1</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">3</td>
      <td style="text-align: center">7</td>
      <td style="text-align: center">9</td>
      <td style="text-align: center">9</td>
      <td style="text-align: center">0</td>
    </tr>
  </tbody>
</table>

<p>Here we have</p>

<ul>
  <li>a 3 in the 10,000s column</li>
  <li>a 7 in the 1,000s column</li>
  <li>a 9 in the 100s column</li>
  <li>a 9 in the 10s column</li>
  <li>a 0 in the ones column</li>
</ul>

<p>So, for example, if we were paying for the Tesla in cash we could use</p>

<ul>
  <li>3 ten thousand dollar bills</li>
  <li>7 thousand dollar bills</li>
  <li>9 one hundred dollar bills</li>
  <li>9 tens</li>
  <li>and 0 ones</li>
</ul>

<h4 id="binary-or-base-2">Binary or base 2</h4>

<p>Computers operate on the binary number system, or base 2. In base 2, each column can have one of two values—0 or 1 and each column represents a power of 2. The rightmost column is 2 to the power of 0. The column to the left of that is 2 to the power of 1 and so on:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>2^7  2^6   2^5   2^4   2^3   2^2   2^1    2^0
128   64    32    16     8     4     2      1
</code></pre></div></div>

<p>So if we have a binary number 101, that equals one 4, zero 2s, and 1 one or, to sum that up, 5.</p>

<p>A binary number like 101 is three bits (<strong>b</strong>inary dig<strong>it</strong>) meaning that there are three numbers. A number like 11111111 is an eight bit number. Let’s convert that number to decimal:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">128</th>
      <th style="text-align: center">64</th>
      <th style="text-align: center">32</th>
      <th style="text-align: center">16</th>
      <th style="text-align: center">8</th>
      <th style="text-align: center">4</th>
      <th style="text-align: center">2</th>
      <th style="text-align: center">1</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">1</td>
      <td style="text-align: center">1</td>
      <td style="text-align: center">1</td>
      <td style="text-align: center">1</td>
      <td style="text-align: center">1</td>
      <td style="text-align: center">1</td>
      <td style="text-align: center">1</td>
      <td style="text-align: center">1</td>
    </tr>
  </tbody>
</table>

<p>So that is</p>

<ul>
  <li>1 128</li>
  <li>1 64</li>
  <li>1 32</li>
  <li>and so on</li>
</ul>

<p>so</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>128 + 64 + 32 + 16 + 8 + 4 + 2 + 1 = 255
</code></pre></div></div>

<p>The smallest number we can represent with 8 bits is 00000000 which in decimal is 0. The largest is 11111111, which is 255.</p>

<p>This is the long explanation of what analogWrite uses the values 0 to 255—because we are using eight bit numbers for it.</p>

<h2 id="a-sample-program-to-have-a-mid-brightness-led-light">A sample program to have a mid-brightness LED light.</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>int led = 2;

void setup() {
  pinMode(led, OUTPUT);
}

void loop() {
  analogWrite(led, 127);
}
</code></pre></div></div>

<h2 id="multi-led">Multi-LED</h2>

<p>Use <strong>three LEDs</strong> for the following remixes. And remember to use variables.</p>

<h3 id="remix-1-loopy-lights">Remix 1 Loopy-Lights™</h3>

<p>Can you write code that cycles the LEDs from off, low brightness, medium brightness, high brightness).
So constantly off - low - mid - high - off - low - mid - high …</p>

<h3 id="remix-2-potentiometer-brightness">Remix 2 Potentiometer-brightness</h3>

<p>Can you write code so that a potentiometer controls the brightness of the LEDs?
This code is pretty short. You will have 1 or 2 lines inside the setup procedure and <strong>2 to 3 lines of code inside the loop procedure</strong>. When the potentiometer if all the way to the left, the led is off, as you turn the potentiometer gradually to the right the led gets gradually brighter.</p>

<h2 id="loops">Loops</h2>

<p>Remember that we have two required parts to a valid Arduino program</p>

<ul>
  <li><code class="highlighter-rouge">void setup()</code> which runs exactly once</li>
  <li><code class="highlighter-rouge">void loop()</code> which runs over and over and over again.</li>
</ul>

<p>Suppose we want to write a program that counts down from 100 and prints the number to the serial monitor. That might look like:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> 1    int i = 100;
 2
 3    void setup() {
 4      // initialize serial communication at 9600 bits per second:
 5      Serial.begin(9600);
 6    }
 7
 8   void loop() {
 9      Serial.println(i);
10      i = i - 1;
11      delay(1000);
12    }
</code></pre></div></div>

<ol>
  <li>So initially <code class="highlighter-rouge">i</code> equals 100. On line 9 we print the value of i, so it prints 100 to the serial monitor. On line 10 we subtract one from <code class="highlighter-rouge">i</code> so now <code class="highlighter-rouge">i</code> equals 99. On line 11 we wait a second and then we loop again.</li>
  <li>On line 9 we print the value of <code class="highlighter-rouge">i</code> so we print 99. On line 10 we subtract one so now <code class="highlighter-rouge">i</code> equals 98. and then we loop</li>
  <li>On line 9 we print the value of <code class="highlighter-rouge">i</code> which is 98. On line line we subtract one so now <code class="highlighter-rouge">i</code> equals 97.</li>
</ol>

<p>Eventually it prints:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>10
9
8
7
6
5
4
3
2
1
0
</code></pre></div></div>

<p>But it doesn’t stop there and continues:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-1
-2
-3
-4
...
-75421
-75422
...
</code></pre></div></div>

<p>And on and on our program goes, never stopping until we pull the plug.</p>

<h3 id="syntactic-sugar">Syntactic Sugar</h3>

<p>Adding and subtracting from a variable is very common in programming so there are a number of shorthand notations we can use. For example, we can rewrite line 10 (<code class="highlighter-rouge">i = i - 1;</code>) as</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>i -= 1
</code></pre></div></div>

<p>That is equivalent to</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>i = i - 1
</code></pre></div></div>

<p>If we wanted to set <code class="highlighter-rouge">i</code> to</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>i = i - 10
</code></pre></div></div>

<p>we could write</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>i -=10
</code></pre></div></div>

<p>and if we wanted to add 10:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>i +=10
</code></pre></div></div>

<p>We can use another notation if all we want to do is add or subtract 1:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>i--  which is equivalent to i = i - 1
i++  which is equivalent to i = i + 1
</code></pre></div></div>

<p>These different notations don’t add anything to what the computer can do. Anything you can do with the expression</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>i++
</code></pre></div></div>

<p>you can do with the orginal</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>i = i + 1
</code></pre></div></div>

<p>This type of notation is called syntactic sugar meaning that it is just an alternative way of expressing something, that is easier to read.</p>

<p>We are going to be using these expressions shortly.</p>

<h3 id="for-loop"><em>for</em>-loop</h3>

<p>Now back to our loop.
As we saw above, the <code class="highlighter-rouge">void loop()</code> runs forever. In addition, it is quite rare for a computer language to have something equivalent to <code class="highlighter-rouge">void loop()</code>. Sometimes we want to loop a specific number of times. For example, maybe we want to print:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>10
9
8
7
6
5
4
3
2
1
Blastoff
</code></pre></div></div>

<p>If we just used</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  int i = 10;
  ...
  void loop() {
     Serial.println(i);
     i = i - 1;
     delay(1000);
  }
</code></pre></div></div>

<p>Our code would print:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>10
9
8
7
6
5
4
3
2
1
0
-1
-2
-3
...
-97591
...
</code></pre></div></div>

<p>So here is a case where we want to stop looping after a certain number of times. Nearly every programming language, including that for the Arduino, has an expression called a <code class="highlighter-rouge">for</code> loop which will do exactly that. Its syntax looks like this:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
1.  for(int i = 0; i &lt;1 0; i++){
2.    Serial.println(i);
3.  }
4.  Serial.println("Done");
</code></pre></div></div>

<p>Let’s disect that.</p>

<ol>
  <li>On line 1, <code class="highlighter-rouge">int i = 0</code> - sets <code class="highlighter-rouge">i</code> initially to 0</li>
  <li>Again on line 1, <code class="highlighter-rouge">i &lt; 10</code> - we read this <em>while i less than 10</em>. So, 0 is less than 10 so we go inside the loop (the lines enclosed in {})</li>
  <li>then we execute what is inside the for block. in this case, we execute line 2. <code class="highlighter-rouge">Serial.println(i)</code>. Since <code class="highlighter-rouge">i</code> is 0 it prints 0. Since that is the only line in the block we go back up to the start of the <em>for</em>-loop, line 1.</li>
  <li>In line 1, <code class="highlighter-rouge">i++</code> - now we will change the value of <code class="highlighter-rouge">i</code>. <code class="highlighter-rouge">i++</code> indicates that we add 1 to <code class="highlighter-rouge">i</code> so now <code class="highlighter-rouge">i</code> is 1.</li>
  <li><code class="highlighter-rouge">i &lt; 10</code> - now we get back to <em>while i is less than 10</em>. i is now 1 which is less than 10.</li>
  <li>then we execute what is inside the for block. <code class="highlighter-rouge">Serial.println(i)</code> which prints 1.</li>
  <li>….</li>
  <li>at some point i = 9</li>
  <li><code class="highlighter-rouge">i &lt; 10</code> is still true so we print 9</li>
  <li><code class="highlighter-rouge">i++</code> we add 1 to <code class="highlighter-rouge">i</code> so now <code class="highlighter-rouge">i</code> is 10.</li>
  <li><code class="highlighter-rouge">i &lt; 10</code> now i is 10 and 10 is not smaller than 10 so we skip the for block and execute the instruction after it which is line 4, <code class="highlighter-rouge">Serial.println("Done");</code> and we print <code class="highlighter-rouge">Done</code></li>
</ol>

<p>The general syntax for the <code class="highlighter-rouge">for</code> loop is</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>for(set a variable to an initial value;
    some test - if true execute block;
    how to change the value of the variable)  {
        the block to execute.
    }

</code></pre></div></div>

<h3 id="remix-3-blastoff">Remix 3: blastoff</h3>

<p>Can you write code, using a for loop, that prints to the serial monitor:</p>

<p>10
9
8
7
6
5
4
3
2
1
Ignition
Blastoff</p>

<h3 id="remix-4-a-for-loopy-pulsey-light-thing">Remix 4: a for loopy pulsey light thing</h3>

<p>Can you write code so that the lights start dark, gradually increase in brightness and then gradually dim and then repeat?</p>

<p>Here is a puzzler that may help you with one of the above problems. What does the following code do?</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>int led =3;
int wait = 40;

void setup() {
   pinMode(led, OUTPUT);
}

void loop() {
  for (int i = 0; i &lt; 256;i++){
    analogWrite(led, i);
    delay(wait);
  }
}
</code></pre></div></div>

<p>If you understand this code, it should provide a clue how to do the loopy pulsey thing. A very rough psuedocode for the loopy pulsey light thing might be</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>start with the led at 0 and gradually turn it to 255
start with the led at 255 and gradually reduce it to 0
</code></pre></div></div>

<p><strong>hint</strong> The loopy pulsey light should be smooth and you shouldn’t see a hiccup in the brightness. Smooth means that the program should display each level of brightness for the same amount of time. If you have something like</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>analogWrite(led, 253);
delay(wait);
analogWrite(led, 254);
delay(wait);
analogWrite(led, 255);
delay(wait);
analogWrite(led, 255);
delay(wait);
analogWrite(led, 254);
delay(wait);
...
</code></pre></div></div>

<p>That program spends twice as long on brightness 255 as it does the others. <strong>These lines just illustrate the problem and are not something you will have in your code</strong></p>

<h1 id="part-2-the-magical-mysterious-world-of-the-multicolor-led">Part 2 The Magical Mysterious World of the Multicolor LED</h1>

<p><img src="/arduino/img/rgb.png" alt="" />
In this part of the lab we are going to be working with what is called an RGB LED (RGB stands for Red, Green, Blue). There are 4 wires sticking out of this LED. The one we have in our kit is called a Common-Cathode type, which simply means that we connect the long leg to ground. (The other type is the Common-Anode type where we connect the long leg to 5V). Here is a picture that may help:</p>

<p><img src="/arduino/img/rgb-led.png" alt="" /></p>

<h3 id="lets-pause-and-look-at-the-common-cathode-in-that-picture">Let’s pause and look at the common-cathode in that picture</h3>

<ul>
  <li>We are going to connect the - pin to ground on our Arduino Uno</li>
  <li>On one side of the longest leg is a single leg. That leg (R) is connected to the red component of the led. To the other side of the longest leg are two legs. The leg closest to the long leg is the green (G) leg, and the next is the blue (B)</li>
  <li>The R (red) pin we will connected through a resistor to an i/o pin on the Uno (pin 9 for example)</li>
  <li>The G (green) pin will be similarly connected</li>
  <li>The B (blue) pin will also be connected in that way.</li>
  <li>And to make things easier we will define a variable to the pins that each are connected to (<code class="highlighter-rouge">int red = 9</code> for example)</li>
</ul>

<h3 id="common-cathode-rgb-leds-are-easy">Common Cathode RGB LEDs are easy.</h3>

<p>Once we make those connections the common cathode RGB LED works like other LEDs we have worked with.</p>

<p>We can turn on the red component with:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>digitalWrite(red, HIGH);
</code></pre></div></div>

<p>or</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>analogWrite(red, 255);
</code></pre></div></div>

<p>and turn off red with</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>digitalWrite(red, LOW);
</code></pre></div></div>

<p>or</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>analogWrite(red, 0);
</code></pre></div></div>

<h2 id="fiddling-with-colors">Fiddling with colors</h2>

<p>In this single LED we can fiddle with the brightness of <strong>R</strong>ed, <strong>G</strong>reen, and <strong>B</strong>lue. For any color we would specify values for each of these. For example, if we wanted solid blue we might have:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>analogWrite(red, 0);
analogWrite(green, 0);
analogWrite(blue, 255);
</code></pre></div></div>

<p>Magenta (aka Fushia) is an equal mix of red and blue so if we wanted a bright magenta we might have:
<img src="pics/magenta.png" alt="" /></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>analogWrite(red, 255);
analogWrite(green, 0);
analogWrite(blue, 255);
</code></pre></div></div>

<p>If you wanted a dimmer magenta you could do:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>analogWrite(red, 127);
analogWrite(green, 0);
analogWrite(blue, 127);
</code></pre></div></div>

<p>Pink is mostly red with some green and blue:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>analogWrite(red, 255);
analogWrite(green, 127);
analogWrite(blue, 127);
</code></pre></div></div>

<p><strong>Let’s get to work!</strong></p>

<h2 id="hardware-hookup">Hardware hookup</h2>

<p><img src="/arduino/img/rgb_bb2.png" alt="" /></p>

<p><a href="/arduino/img/rgb_bb2.png">link to larger picture</a></p>

<h2 id="the-code">The code</h2>

<p>And here is code that will display 8 colors just using digitalWrite:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
int RED_PIN = 9;
int GREEN_PIN = 10;
int BLUE_PIN = 11;


int DISPLAY_TIME = 100;  // In milliseconds


void setup()
{
  pinMode(RED_PIN, OUTPUT);
  pinMode(GREEN_PIN, OUTPUT);
  pinMode(BLUE_PIN, OUTPUT);
}


void loop()
{

  mainColors();
}


// Here's the mainColors() procedure we've written.

// This procedure displays the eight "main" colors that the RGB LED
// can produce.

void mainColors()
{
  // Off (all LEDs off):

  digitalWrite(RED_PIN, LOW);
  digitalWrite(GREEN_PIN, LOW);
  digitalWrite(BLUE_PIN, LOW);

  delay(5000);

  // Red (turn just the red LED on):

  digitalWrite(RED_PIN, HIGH);
  digitalWrite(GREEN_PIN, LOW);
  digitalWrite(BLUE_PIN, LOW);

  delay(1000);

  // Green (turn just the green LED on):

  digitalWrite(RED_PIN, LOW);
  digitalWrite(GREEN_PIN, HIGH);
  digitalWrite(BLUE_PIN, LOW);

  delay(1000);

  // Blue (turn just the blue LED on):

  digitalWrite(RED_PIN, LOW);
  digitalWrite(GREEN_PIN, LOW);
  digitalWrite(BLUE_PIN, HIGH);

  delay(1000);

  // Yellow (turn red and green on):

  digitalWrite(RED_PIN, HIGH);
  digitalWrite(GREEN_PIN, HIGH);
  digitalWrite(BLUE_PIN, LOW);

  delay(1000);

  // Cyan (turn green and blue on):

  digitalWrite(RED_PIN, LOW);
  digitalWrite(GREEN_PIN, HIGH);
  digitalWrite(BLUE_PIN, HIGH);

  delay(1000);

  // Purple (turn red and blue on):

  digitalWrite(RED_PIN, HIGH);
  digitalWrite(GREEN_PIN, LOW);
  digitalWrite(BLUE_PIN, HIGH);

  delay(1000);

  // White (turn all the LEDs on):

  digitalWrite(RED_PIN, HIGH);
  digitalWrite(GREEN_PIN, HIGH);
  digitalWrite(BLUE_PIN, HIGH);

  delay(1000);
}

</code></pre></div></div>

<h4 id="what-you-should-see">What you should see.</h4>

<p>After a 5 second delay, you should should see red for a second, followed by green, blue, yellow, cyan, and purple. Then it repeats after a 5 second delay. If you don’t see red after the 5 second delay then:</p>

<ol>
  <li>if you see either green or blue check your wiring.</li>
  <li>if you see a whitish color you may have a common-anode RGB LED. Check out the appendix below.</li>
</ol>

<h3 id="dimmer-red">Dimmer Red</h3>

<p>Here is some code that pulses the red part of the multicolor LED (and introduces the <code class="highlighter-rouge">for</code> loop):</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	int redLed = 9;
	int greenLed =10;
	int blueLed = 11;
	int display_time = 2; //in milliseconds
	int redColor = 0;
	int blueColor = 0;
	int greenColor = 0;

	void setup() {
	  pinMode(redLed, OUTPUT);
	  pinMode(greenLed, OUTPUT);
	  pinMode(blueLed, OUTPUT);

	}

	void dimmerRed(){
	  // first turn off the green and blue LEDs
	  analogWrite(greenLed, 0);
	  analogWrite(blueLed, 0);


	  // now make red dimmer and dimmer
	  for (int i = 255; i &gt;= 0; i--){
	    analogWrite(redLed, i);
	    delay(display_time);
	  }
	}

	void loop(){
	  dimmerRed();
	}
</code></pre></div></div>

<p>As you can see, the red light starts at its brightness (value 255) and quickly dims (goes to 0).</p>

<p>Let’s look at the code for the procedure <code class="highlighter-rouge">dimmerRed</code>.</p>

<ul>
  <li>The first things we do is turn off green and blue by using <code class="highlighter-rouge">analogWrite(greenLed, 0)</code> and <code class="highlighter-rouge">analogWrite(blueLed, 0)</code></li>
  <li>Now we start our <code class="highlighter-rouge">for</code> loop. The first time through the loop <code class="highlighter-rouge">i</code> is 255, the next time it is 254, then 253 until <code class="highlighter-rouge">i</code> equals -1 and then the loop stops.</li>
  <li>Next we have <code class="highlighter-rouge">analogWrite(redLed, i);</code> Initially i is 255 so we set the redLed to brightness 255. The next time through the loop i is 254 so we set the brightness to 254 and so on.</li>
</ul>

<h2 id="red-and-blue-passing-in-the-night">Red and Blue Passing in the Night</h2>

<h3 id="redmix-5-redtoblue-">Redmix 5: redToBlue-</h3>

<p>Can you write a procedure <code class="highlighter-rouge">redToBlue</code> so that as the red dims the blue increases in brightness? The format of the procedure is similar to that for <code class="highlighter-rouge">dimmerRed</code>. Once you’ve written that procedure change the loop procedure to:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	void loop(){
	  redToBlue();
	}
</code></pre></div></div>

<p>to test it.</p>

<h3 id="remix-6-red-and-blue-passing-in-the-night">Remix 6: red and blue passing in the night</h3>

<p>Ok. Part 1 had you move from red to blue and then there was a sudden jump back to red. Can you modify the code so that the light gradually goes from red to blue and then gradually back again? This may involve writing another procedure.</p>

<h3 id="remix-7-roy-g-biv---10-20xp">Remix 7: Roy G Biv - 10-20xp</h3>

<p><a href="https://www.youtube.com/watch?v=uRP1KcSfg5A">Roy G Biv - They Might Be Giants</a></p>

<p>Now we want the multicolor led to go gradually from red to green then green to blue and then blue to red? Think about how you would break this problem down into simple procedures. 10xp for a solution that works, 20xp for code that breaks this task down into simpler subtasks.</p>

<h3 id="remix-8-roy-g-biv-r-vib-g-yor">Remix 8: Roy G Biv R Vib G Yor</h3>

<p>This is a puzzle. What do we want to see?</p>

<h2 id="appendix-if-you-have-a-common-anode-rgb-led">Appendix: If you have a common-anode RGB LED</h2>

<p>If the above examples are not working correctly you may have a common anode RGB LED. Unfortunately, they look the same. Here is a picture that may help:</p>

<p><img src="/arduino/img/common_anode.png" alt="" /></p>

<h3 id="lets-pause-and-look-at-that-picture">Let’s pause and look at that picture</h3>

<ul>
  <li>We are going to connect. the + pin to 3v on our Arduino Uno</li>
  <li>The R (red) pin we will connected through a resistor to an i/o pin on the Uno (pin 5 for example)</li>
  <li>The G (green) pin will be similarly connected</li>
  <li>The B (blue) pin will also be connected in that way.</li>
  <li>And to make things easier we will define a variable to the pins that each are connected to (<code class="highlighter-rouge">int red = 5</code> for example)</li>
</ul>

<h3 id="some-slight-challenges-with-a-common-anode-led">Some slight challenges with a common-anode LED.</h3>

<p>Having a common-anode RGB LED makes life a tad more <del>difficult</del> interesting. In the above example if we wanted the <code class="highlighter-rouge">led</code> off we would write:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>analogWrite(led, 0);
</code></pre></div></div>

<p>and if we wanted full brightness we had</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>analogWrite(led, 255);
</code></pre></div></div>

<h3 id="heres-what-i-dont-like-about-common-anode-leds">Here’s what I don’t like about common-anode LEDs.</h3>

<p>With a common-anode LED things are topsy-turvy. To have a <code class="highlighter-rouge">green</code> led off we would have</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>analogWrite(green, 255);
</code></pre></div></div>

<p>and if we wanted full brightness we would have</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>analogWrite(green, 0);
</code></pre></div></div>

<p>We could also use digitalWrite. In this case</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>digitalWrite(green, HIGH)
</code></pre></div></div>

<p>would be off and</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>digitalWrite(green, LOW);
</code></pre></div></div>

<p>would be on.</p>

					





					
						<hr />
					
					
						<div class="pagination-section pull-left">
							<div class="title">
								Previous section:
							</div>
							<a rel="prev" class="prev" href="/arduino/modules/two/Procedures/">
								Procedures </a>
						</div>
					
					
						<div class="pagination-section pull-right">
							<div class="title">
								Next section:
							</div>
							<a rel="next" class="next" href="/arduino/modules/two/Light-Sensor/"> Light Sensor
							</a>
						</div>
					
				</div>
			</div>
		</div>
	</div>
</div>


<footer class="p2pu-footer">
  <div class="container">
    <div class="row">
      <div class="col-sm-3 col-sm-offset-3">
        <a href="https://inquiryum.com/" class="image-link"
          ><img
            id="cmp-logo"
            src="/arduino/img/inquiryum-logo.png"
            class="img-responsive"
        /></a>
      </div>

      <div class="col-sm-3">
        <a href="https://www.imls.gov" class="image-link"
          ><img src="/arduino/img/footer2.png" class="img-responsive"
        /></a>
      </div>
    </div>

    <div class="row">
      <div class="col-sm-6 col-sm-offset-3" id="p2pu-content">
        <p>
          Built using <a href="http://howto.p2pu.org">Course in a Box</a>, a
          project of
        </p>
        <a href="https://www.p2pu.org" class="image-link"
          ><img
            src="/arduino/img/p2pu-logo-2x-white.png"
            alt="P2PU logo"
        /></a>
      </div>
    </div>

    <div class="row">
      <div class="col-sm-10 col-sm-offset-1 cc-by-sa">
        <img
          src="/arduino/img/cc-icons.png"
          alt="CC-BY-SA Icon"
          class="img-responsive"
        />
        <p>
          Unless otherwise noted, all the materials on this site are licensed
          under a
          <a
            target="_blank"
            href="http://creativecommons.org/licenses/by-sa/4.0/"
          >
            Creative Commons Attribution Share Alike 4.0</a
          >
          Unported license.
        </p>
      </div>
    </div>
  </div>
</footer>


<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script>
  window.jQuery || document.write('<script src="/arduino/js/jquery.min.js"><\/script>')
</script>

<script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
<script type="text/javascript"
        src="//s3.amazonaws.com/p2pu-navigation-widget/p2pu_menu_slider.js"></script>
<script src="/arduino/js/init.js"></script>
<script src="/arduino/js/gh_link_helper.js"></script>



<script>
	P2PU.ciab.init();
</script>



<!-- Google Analytics -->

	<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  
    ga('create', 'UA-5757664-19', 'auto');
  
  
    ga('create', 'UA-55722824-1', 'auto', {'name': 'p2puTracker'} );
  
  
    ga('send', 'pageview');
  
  
    ga('p2puTracker.send', 'pageview');
  
</script>



</body>
</html>
